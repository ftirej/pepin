<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Pepin test page</title>
    <!-- PÃ©pin HMR, js & css are automatically injected -->

    <script type="text/javascript" src="pepin/lib/jquery.js"></script>
    <script type="text/javascript" src="pepin/lib/jquery.easing.1.3.js"></script>
    <script type="text/javascript" src="pepin/lib/jquery.mousewheel.js"></script>
    <script type="text/javascript" src="pepin/lib/screenfull.js"></script>

    <script type="text/javascript">

window.Medias = [

  {"Name": "Pano A", "URL": "http://dornstetter.com/antoine/pepin/pepin/[Group 0]-BW4C5790_BW4C5795-6 images.jpg", "Type": "image", "ID": 0, "Group" : 0},
  {"Name": "Pano B", "URL": "http://dornstetter.com/antoine/pepin/pepin/[Group 0]-BW4C5790_BW4C5795-6 images aml.jpg", "Type": "image", "ID": 1, "Group" : 0},

  {"Name": "P1 A", "URL": "http://dornstetter.com/antoine/pepin/pepin/[Group 0]-BW4C4927_BW4C4929-3 images.jpg", "Type": "image", "ID": 2, "Group" : 1},
  {"Name": "P1 B", "URL": "http://dornstetter.com/antoine/pepin/pepin/[Group 0]-BW4C4927_BW4C4929-3 images PHOTO FRACTAL.jpg", "Type": "image", "ID": 3, "Group" : 1, "Notes": [
    JSON.stringify({"MediaID":3,"text":"ugly gradient","type":"point","color":"white","centerPi":[388,90.4],"figureVi":[152,152],"textDi":[32,32],"textWidth":159,"textHeight":39,"polylineX":[],"polylineY":[]}),
    JSON.stringify({"MediaID":3,"text":"","type":"freehand","color":"red","centerPi":[838,671],"figureVi":[-32,-32],"textDi":[32,32],"textWidth":160,"textHeight":48,"polylineX":[838,928.6,1024.8,1122.6,1221.8,1282.2,1305.8,1251.4,1161.2,1063.4,964.8,866,767.2,668.6,569.4,469.4,370,270,170.6,94.6,125.6,199.4,282.8,380,477.8,576,675,774.4,830],"polylineY":[671,711.6,739.2,757.6,760.2,686.4,590,514.8,472.4,451.2,434.8,420.2,405,388,376.6,375,366.8,363.4,370,431.4,517.4,584.6,639.2,663,682.8,701.6,707.8,709.2,685]}),
    JSON.stringify({"MediaID":3,"text":"nice fractal","type":"rect","color":"blue","centerPi":[577.8,1895],"figureVi":[226,190],"textDi":[-226.2,-190.2],"textWidth":160,"textHeight":48,"polylineX":[],"polylineY":[]})
  ]},

  {"Name": "Big Buck Bunny 1", "URL": "http://dornstetter.com/antoine/pepin/pepin/bbb_1.mp4", "ThumbnailURL" : "http://dornstetter.com/antoine/pepin/pepin/bbb_1.jpg" , "Type": "video", "ID": 4, "Group" : 1},
  {"Name": "Big Buck Bunny 2", "URL": "http://dornstetter.com/antoine/pepin/pepin/bbb_2.mp4", "ThumbnailURL" : "http://dornstetter.com/antoine/pepin/pepin/bbb_2.jpg" , "Type": "video", "ID": 5, "Group" : 1, "Notes": [
  JSON.stringify({"MediaID":5,"Frame":102,"text":"Not enough motion blur","type":"circle","color":"darkgreen","centerPi":[1353,387],"figureVi":[165,178.5],"textDi":[-165,-178.5],"textWidth":126,"textHeight":60,"polylineX":[],"polylineY":[]}),
  JSON.stringify({"MediaID":5,"Frame":102,"text":"","type":"freehand","color":"red","centerPi":[589.5,418.5],"figureVi":[-32,-32],"textDi":[32,32],"textWidth":160,"textHeight":48,"polylineX":[589.5,596.1,609,626.1,646.2,672,701,731,761,791,795.3,776,777.7,798.9,800.8,776.9,755.7,753],"polylineY":[418.5,389.7,363,339.6,318.2,304,298.5,298.5,298.5,298.5,290.4,268.8,273.5,294.5,311.1,329,350,354]}),
  JSON.stringify({"MediaID":5,"Frame":102,"text":"Too bright","type":"point","color":"red","centerPi":[591,423],"figureVi":[108.7,108.7],"textDi":[-26.5,-1],"textWidth":160,"textHeight":48,"polylineX":[],"polylineY":[]}),
  JSON.stringify({"MediaID":5,"Frame":102,"text":"","type":"freehand","color":"blue","centerPi":[99.1,967.9],"figureVi":[-32,-32],"textDi":[32,32],"textWidth":160,"textHeight":48,"polylineX":[99.1,149.2,208.3,272.3,326.1,378.4,440.5,498.7,554.8,610.9,675,735.2,788.2,842.8,905.7,972.5,1034.2,1093.8,1152.8,1212.3,1271.4,1333.5,1397.7,1458.4,1513.2,1566.7,1625.1,1685.6,1747.5,1814.5,1878.7],"polylineY":[967.9,934.7,909.6,906.8,940.3,971.3,979.8,945.3,907.1,870.1,861,890.6,933,973,995.1,988.8,960.8,928.3,894.6,861.7,828.4,800.9,781.1,805.6,845.6,887.5,922,952.9,979.7,988.3,978.1]})
  ]},
  {"Name": "Big Buck Bunny 3", "URL": "http://dornstetter.com/antoine/pepin/pepin/bbb_3.mp4", "ThumbnailURL" : "http://dornstetter.com/antoine/pepin/pepin/bbb_3.jpg" , "Type": "video", "ID": 6, "Group" : 1},
  {"Name": "Big Buck Bunny 4", "URL": "http://dornstetter.com/antoine/pepin/pepin/bbb_4.mp4", "ThumbnailURL" : "http://dornstetter.com/antoine/pepin/pepin/bbb_4.jpg" , "Type": "video", "ID": 7, "Group" : 1},

  {"Name": "P2 A", "URL": "http://dornstetter.com/antoine/pepin/pepin/BW4C6522.JPG", "Type": "image", "ID": 10, "Group" : 4},
  {"Name": "P2 B", "URL": "http://dornstetter.com/antoine/pepin/pepin/BW4C6522_aml_v2.jpg", "Type": "image", "ID": 11, "Group" : 4},
  {"Name": "P2 C", "URL": "http://dornstetter.com/antoine/pepin/pepin/BW4C6522_aml_v3.jpg", "Type": "image", "ID": 12, "Group" : 4},
  {"Name": "P2 D", "URL": "http://dornstetter.com/antoine/pepin/pepin/BW4C6522aml.jpg", "Type": "image", "ID": 13, "Group" : 4},
];

for( var i = 0 ; i < window.Medias.length ; i++ )
{
  for( var j in window.Medias[i].Notes )
  {
    window.Medias[i].Notes[j] = JSON.parse(window.Medias[i].Notes[j]);
  }

  if( !window.Medias[i].ThumbnailURL )
  {
    window.Medias[i].ThumbnailURL = window.Medias[i].URL;
  }

}

window.addEventListener('load',function(){

  var R = window.Pepin.default.CreatePepinObject({
    pepinElement : '#pepin',
    options : { SetDurationAuto : true, },
    '$' : jQuery,
    screenfull : screenfull,
    props: [],
  });

  R.data.SB_Nom = "";

  R.methods.onMediaChanged = function(Media){
    console.log(Media);
  };

  R.methods.onOpen = function(){
    console.log('pepin opened !');
  };

  R.methods.onClose = function(){
    console.log('pepin closed !');
  };

  window.PepinInstance = new window.Pepin.default.Vue(R);
  //console.log(window.PepinInstance);

  //window.setTimeout(window.PepinInstance.Open,1000);
  window.PepinInstance.Open();
  //window.PepinInstance.sidebarOpen();
  window.PepinInstance.collection.AjouterMedias(window.Medias);
  //window.PepinInstance.collection.LireMedias([0],-1);
  
});

$(function(){


  $.each(window.Medias,function(i,el){

    $('<button></button>')
      .text('#'+i+' : ' + el.Name)
      .click(function(){
        window.PepinInstance.collection.LireMedias([i],-1);
        window.PepinInstance.Open();
      })
      .appendTo($('#boutons'));

    $('<img />')
      .attr('src',el.URL)
      .appendTo($('#imgs'));

  });

});

function Notes(){

}

    </script>
    <!--<link rel="stylesheet" type="text/css" href="pepin/lib/style.css" />-->
    <style type="text/css">

#boutons button
{
padding: 16px;
margin: 16px;
}

    </style>
  </head>
  <body>
  <div>
  </div>
  <div id="boutons"></div>
  <div id="imgs"></div>

  <div
    class="Pepin"
    id="pepin"
    hide-logo="true"
    sidebar-id="pepin-sidebar"
    default-fps="30.0"
    disable-shortcuts="false"
    show-media-name="false"
    lang="en"
    open-help="false"
    show-notes="true"
    edit-notes="true"
    video-sticky-notes="false"
  >

  <pepin-toolbar
    :colors="['white' , 'darkgreen' , 'blue' , 'red' , '#e71' , 'black']"
    :shapes="['none','point','freehand','circle','ellipse','square','rect','delete']"
  >
    
  </pepin-toolbar>

  <pepin-collection></pepin-collection>
  <pepin-overlay></pepin-overlay>
  <pepin-fullscreen-transition></pepin-fullscreen-transition>
  
  <pepin-help></pepin-help>

  <div id="pepin-sidebar" class="pepin-sidebar">

    Your Informations

  </div>

  </div>

  </body>
</html>
